<p-toast />

<div class="container mx-auto px-4 py-8 max-w-4xl">
  <p-card [header]="isEditMode ? 'Edit Company' : 'Add New Company'">
    <ng-template pTemplate="content">
      <form [formGroup]="companyForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
              Company Name *
            </label>
            <input id="name" type="text" pInputText formControlName="name" class="w-full"
              [ngClass]="{'p-invalid': companyForm.get('name')?.invalid && companyForm.get('name')?.touched}" />
            @if (companyForm.get('name')?.invalid && companyForm.get('name')?.touched) {
            <small class="p-error">
              Company name is required
            </small>
            }

          </div>

          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
              Email
            </label>
            <input id="email" type="email" pInputText formControlName="email" class="w-full"
              [ngClass]="{'p-invalid': companyForm.get('email')?.invalid && companyForm.get('email')?.touched}" />
            @if (companyForm.get('email')?.invalid && companyForm.get('email')?.touched){
            <small class="p-error">
              Please enter a valid email
            </small>
            }
          </div>

          <div>
            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
              Phone
            </label>
            <input id="phone" type="tel" pInputText formControlName="phone" class="w-full" />
          </div>

          <div class="md:col-span-2">
            <label for="address" class="block text-sm font-medium text-gray-700 mb-2">
              Address
            </label>
            <textarea id="address" pInputTextarea formControlName="address" class="w-full" rows="3"></textarea>
          </div>
        </div>

        <div class="flex justify-end space-x-4 pt-6 border-t">
          <p-button label="Cancel" severity="secondary" [routerLink]="['/companies']" [outlined]="true" />
          <p-button type="submit" [label]="isEditMode ? 'Update Company' : 'Create Company'" [loading]="loading"
            [disabled]="companyForm.invalid || loading" />
        </div>
      </form>
    </ng-template>
  </p-card>
</div>